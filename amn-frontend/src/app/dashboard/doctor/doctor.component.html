<div class="p-6 bg-gray-50 min-h-screen">
  <h1 class="text-2xl font-bold mb-6">Bienvenue Dr. {{ doctorName || '---' }}</h1>

  <!-- Patient Search -->
  <div class="bg-white shadow rounded p-4 mb-6">
    <h2 class="text-lg font-semibold mb-4">Recherche du Patient</h2>
    <div class="flex space-x-4">
      <input [(ngModel)]="cin" placeholder="CIN du patient" class="border p-2 flex-1" />
      <input [(ngModel)]="fullName" placeholder="Nom complet" class="border p-2 flex-1" />
      <button (click)="searchPatient()" class="bg-blue-600 text-white px-4 py-2 rounded">Rechercher</button>
    </div>
  </div>

  <!-- Patient Profile Section -->
  <div *ngIf="patientProfile" class="bg-white shadow rounded p-6 mb-6">
    <div class="flex items-center space-x-4 mb-4">
      <div class="w-16 h-16 bg-gray-300 rounded-full"></div>
      <div>
        <h2 class="text-xl font-bold">{{ patientProfile.fullName }}</h2>
        <p class="text-gray-600">CIN: {{ patientProfile.cin }}</p>
      </div>
    </div>
    <div class="grid grid-cols-2 gap-4">
      <div>
        <p><strong>Date de naissance:</strong> {{ patientProfile.birthDate || 'Non renseigné' }}</p>
        <p><strong>Groupe sanguin:</strong> {{ patientProfile.bloodType || 'Non renseigné' }}</p>
        <p><strong>Problème cardiaque:</strong> {{ patientProfile.hasHeartProblem ? 'Oui' : 'Non' }}</p>
        <p><strong>Antécédents de chirurgie:</strong> {{ patientProfile.hasSurgery ? 'Oui' : 'Non' }}</p>
      </div>
      <div>
        <p><strong>Email:</strong> {{ patientProfile.email }}</p>
        <p><strong>Contact d'urgence:</strong> {{ patientProfile.emergencyContact || 'Non renseigné' }}</p>
        <p><strong>Adresse:</strong> {{ patientProfile.address || 'Non renseignée' }}</p>
        <p><strong>Allergies:</strong> {{ patientProfile.allergies || 'Aucune' }}</p>
        <p><strong>Maladies chroniques:</strong> {{ patientProfile.chronicDiseases || 'Aucune' }}</p>
      </div>
    </div>
  </div>

  <!-- Consultations Table -->
  <div *ngIf="patientProfile.medicalRecords?.length" class="bg-white shadow rounded p-4 mb-6">
    <h2 class="text-lg font-semibold mb-4">Consultations</h2>
    <table class="w-full text-sm">
      <thead class="bg-gray-100">
      <tr>
        <th class="p-2">Date</th>
        <th class="p-2">Motif</th>
        <th class="p-2">Diagnostic</th>
        <th class="p-2">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let record of patientProfile.medicalRecords" class="border-b">
        <td class="p-2">{{ record.creationDate | date: 'shortDate' }}</td>
        <td class="p-2">{{ record.reason }}</td>
        <td class="p-2">{{ record.diagnosis }}</td>
        <td class="p-2">
          <button class="text-blue-600" (click)="viewConsultationDetails(record.id)">Voir</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Prescriptions Table -->
  <div *ngIf="patientProfile.prescriptions?.length" class="bg-white shadow rounded p-4 mb-6">
    <h2 class="text-lg font-semibold mb-4">Ordonnances</h2>
    <table class="w-full text-sm">
      <thead class="bg-gray-100">
      <tr>
        <th class="p-2">Date</th>
        <th class="p-2">Médicaments</th>
        <th class="p-2">Permanent</th>
        <th class="p-2">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let prescription of patientProfile.prescriptions" class="border-b">
        <td class="p-2">{{ prescription.prescribedDate | date: 'shortDate' }}</td>
        <td class="p-2">
          <ul>
            <li *ngFor="let med of prescription.medications">{{ med.name }}</li>
          </ul>
        </td>
        <td class="p-2">{{ prescription.permanent ? 'Oui' : 'Non' }}</td>
        <td class="p-2">
          <button class="text-blue-600" (click)="viewPrescriptionDetails(prescription.id)">Voir</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Scans Table -->
  <div *ngIf="patientProfile.scans?.length" class="bg-white shadow rounded p-4 mb-6">
    <h2 class="text-lg font-semibold mb-4">Scans</h2>
    <table class="w-full text-sm">
      <thead class="bg-gray-100">
      <tr>
        <th class="p-2">Titre</th>
        <th class="p-2">Date</th>
        <th class="p-2">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let scan of patientProfile.scans" class="border-b">
        <td class="p-2">{{ scan.title }}</td>
        <td class="p-2">{{ scan.uploadDate | date: 'shortDate' }}</td>
        <td class="p-2">
          <button class="text-blue-600" (click)="viewScanDetails(scan.id)">Voir</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
