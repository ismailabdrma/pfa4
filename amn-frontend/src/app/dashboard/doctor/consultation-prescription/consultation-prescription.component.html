<div class="p-6 space-y-6">
  <h1 class="text-2xl font-bold">Ajouter une Consultation et Ordonnance</h1>

  <!-- Patient Info -->
  <div class="bg-white shadow p-4 rounded">
    <h2 class="text-xl font-semibold mb-2">Patient</h2>
    <p><strong>CIN :</strong> {{ cin }}</p>
    <p><strong>Nom complet :</strong> {{ fullName }}</p>
  </div>

  <!-- Consultation Form -->
  <div *ngIf="patientId" class="bg-white shadow p-4 rounded">
    <h2 class="text-xl font-semibold mb-2">Nouvelle Consultation</h2>
    <textarea [(ngModel)]="record.reason" placeholder="Motif" class="w-full border p-2 rounded mb-2"></textarea>
    <textarea [(ngModel)]="record.diagnosis" placeholder="Diagnostic" class="w-full border p-2 rounded mb-2"></textarea>
    <textarea [(ngModel)]="record.notes" placeholder="Notes" class="w-full border p-2 rounded"></textarea>
  </div>

  <!-- Prescription Form -->
  <div *ngIf="patientId" class="bg-white shadow p-4 rounded">
    <h2 class="text-xl font-semibold mb-2">Ordonnance</h2>
    <div *ngFor="let med of medications; let i = index" class="mb-4 border p-2 rounded">
      <h3 class="font-medium">Médicament {{ i + 1 }}</h3>
      <input [(ngModel)]="med.name" placeholder="Nom" class="border p-2 w-full rounded mb-1" />
      <input [(ngModel)]="med.dosage" placeholder="Dosage" class="border p-2 w-full rounded mb-1" />
      <input [(ngModel)]="med.period" placeholder="Durée" class="border p-2 w-full rounded mb-1" />
      <label class="inline-flex items-center mt-1">
        <input type="checkbox" [(ngModel)]="med.permanent" class="mr-2" />
        Permanent
      </label>
      <button (click)="removeMedication(i)" class="text-red-600 mt-2">Supprimer</button>
    </div>
    <button (click)="addMedication()" class="bg-green-600 text-white px-4 py-2 rounded">
      + Ajouter un Médicament
    </button>
  </div>

  <!-- Submit Button -->
  <button
    *ngIf="patientId"
    (click)="submit()"
    class="bg-purple-700 text-white px-6 py-2 rounded"
  >
    Enregistrer Consultation & Ordonnance
  </button>
</div>
